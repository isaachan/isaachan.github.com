<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[To iterate is human, to recurse divine.]]></title>
  <link href="http://isaachan.github.com/atom.xml" rel="self"/>
  <link href="http://isaachan.github.com/"/>
  <updated>2013-08-20T07:59:05+08:00</updated>
  <id>http://isaachan.github.com/</id>
  <author>
    <name><![CDATA[]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[文本化的幻灯片 - 实用技术]]></title>
    <link href="http://isaachan.github.com/blog/2013/08/18/slide-textuality-tips/"/>
    <updated>2013-08-18T21:56:00+08:00</updated>
    <id>http://isaachan.github.com/blog/2013/08/18/slide-textuality-tips</id>
    <content type="html"><![CDATA[<p>不久前在博客上发了一篇使用Slideshow创建幻灯片的<a href="http://isaachan.github.io/blog/2013/08/17/slide-textuality/">文章</a>，不过这篇博文却是在两年多前写的。这两年多里，我在公司内部的演讲幻灯片几乎都是用Slideshow做的，外部演讲也用过几次了，比如<a href="http://www.lisp.org.cn/wiki/lisp/event/2013-meetup">Lisp社区的</a>。在这个过程中，我对Slideshow的强大功能与高效率越来越有信心了。这篇文章分享一些我总结的经验。</p>

<h2>1. 关于使用</h2>

<p>Slideshow本身要求使用者编写scheme代码来创建幻灯片，不过这部分不设计代码，而是一些方便使用的技巧。</p>

<h4>显示下一页预览</h4>

<p>在幻灯片演示的过程中，按住Alt-c（或者Cmd-c）可以开启、关闭下一页幻灯片的预览。图1显示了启动预览时的效果。
<img src="http://isaachan.github.com/images/slide-textuality-tips/slideshow-preview.png" alt="下一页预览" />
图1</p>

<h4>显示注释</h4>

<p>在幻灯片演示的过程中，按住Alt-d（或者Cmd-d）可以显示、隐藏注释内容。至于在幻灯片里添加注释的内容，需要调用comment函数，</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="p">(</span><span class="nf">slide</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">t</span> <span class="s">&quot;Hello World!&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">comment</span> <span class="s">&quot;this is a comment&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>




<!-- more -->


<h4>移动窗口位置</h4>

<p>在幻灯片演示的过程中，按住Shift和一个方向键，可以向方向键的方向移动窗口，每次移动一个像素。当演讲时投影仪设备或角度受限时，这个方法能够临时救急。</p>

<h4>导出为PDF格式</h4>

<p>随着越来越多的办公软件与格式的流行，人们共享像幻灯片这类文件时兼容性问题越来越多，好在在很多时候，PDF是个几乎所有人都能接受的格式，于是，几乎所有办公软件都有导出PDF格式的功能。Slideshow也不例外。命令行参数&#8221;-p&#8221;可以告诉Slideshow不要演示幻灯片，而是打印它。打印前只要选择“Save as Pdf”，就可以到处文件，而不必真的执行打印了。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="nv">&gt;</span> <span class="nv">slideshow</span> <span class="nv">-p</span> <span class="nv">helloworld</span><span class="o">.</span><span class="nv">rkt</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. 关于编码</h2>

<p>前面介绍了一些Slideshow的使用技巧，但是这些确实无法和PowerPoint或者Keynote这类成熟的幻灯片工具比较。而Slideshow真正的优势在于可以通过编写scheme代码来创建幻灯片，因此幻灯片就可以具有代码的那种简洁、抽象、确定、优雅的特性了。这里我列举四个例子，</p>

<h4>介绍题目的幻灯片</h4>

<p>你的幻灯片第一页怎么做？演讲题目、演讲者姓名、公司、邮箱、微博、主页等等。然后排版，标题居中、名字靠右，还是&#8230;其实对于你自己来说，每次的不同只有演讲题目而已，其他的像公司、邮箱、样式等等都可以是一样的，这样能够打造你自己一致的风格。而提取相同的部分，隔离不同的部分——幻灯片已经全部变成代码了——当然可以做到：</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="p">(</span><span class="k">define </span><span class="nv">title</span>
</span><span class='line'>  <span class="p">(</span><span class="k">lambda </span><span class="nv">content</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">slide</span> <span class="p">(</span><span class="nf">vr-append</span> <span class="p">(</span><span class="nb">* </span><span class="nv">gap-size</span> <span class="mi">5</span><span class="p">)</span>
</span><span class='line'>             <span class="p">(</span><span class="nf">vc-append</span>
</span><span class='line'>               <span class="p">(</span><span class="nb">* </span><span class="nv">gap-size</span> <span class="mi">3</span><span class="p">)</span>
</span><span class='line'>               <span class="p">(</span><span class="nf">adapt</span> <span class="nv">content</span><span class="p">)</span>
</span><span class='line'>             <span class="p">)</span>
</span><span class='line'>             <span class="p">(</span><span class="nf">vr-append</span> <span class="p">(</span><span class="nb">* </span><span class="nv">gap-size</span> <span class="mf">0.5</span><span class="p">)</span>
</span><span class='line'>                <span class="p">(</span><span class="nf">text</span> <span class="s">&quot;Han Kai&quot;</span> <span class="p">(</span><span class="nb">cons </span><span class="ss">&#39;bold</span> <span class="p">(</span><span class="nf">current-main-font</span><span class="p">))</span> <span class="mi">32</span><span class="p">)</span>
</span><span class='line'>                <span class="p">(</span><span class="nf">text</span> <span class="s">&quot;http://isaachan.github.com&quot;</span> <span class="p">(</span><span class="nf">current-main-font</span><span class="p">)</span> <span class="mi">24</span><span class="p">)</span>
</span><span class='line'>                <span class="p">(</span><span class="nf">hc-append</span>
</span><span class='line'>                  <span class="p">(</span><span class="nf">text</span> <span class="s">&quot;Thought&quot;</span> <span class="p">(</span><span class="nb">cons </span><span class="ss">&#39;bold</span> <span class="p">(</span><span class="nf">current-main-font</span><span class="p">))</span> <span class="mi">24</span><span class="p">)</span>
</span><span class='line'>                  <span class="p">(</span><span class="nf">text</span> <span class="s">&quot;Works&quot;</span> <span class="p">(</span><span class="nf">current-main-font</span><span class="p">)</span> <span class="mi">24</span><span class="p">)</span>
</span><span class='line'>                <span class="p">)</span>
</span><span class='line'>                <span class="p">(</span><span class="nf">text</span> <span class="s">&quot;@isaachan&quot;</span> <span class="p">(</span><span class="nb">cons </span><span class="ss">&#39;bold</span> <span class="p">(</span><span class="nf">current-main-font</span><span class="p">))</span> <span class="mi">32</span><span class="p">)</span>
</span><span class='line'>             <span class="p">)</span>
</span><span class='line'>        <span class="p">)</span>
</span><span class='line'>    <span class="p">)</span>
</span><span class='line'>  <span class="p">)</span>
</span><span class='line'><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>这段代码定义了title函数，它接受一个字符串类型的参数，即演讲题目内容，然后将题目以64号字居中显示，右下角以此是演讲名姓名、Blog主页、公司名和微博。那么，当用不同参数调用title函数时，可以看到风格一致、只有题目不同的幻灯片了：（图2）</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="p">(</span><span class="nf">title</span> <span class="s">&quot;Logic programming and Prolog&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="http://isaachan.github.com/images/slide-textuality-tips/logic_programming_and_prolog.png" alt="title_1" />
图2</p>

<p>当然，如果title部分需要做一些定制，也没有问题：（图3）</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="p">(</span><span class="nf">title</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">text</span> <span class="s">&quot;How to&quot;</span> <span class="p">(</span><span class="nf">current-main-font</span><span class="p">)</span> <span class="mi">50</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">text</span> <span class="s">&quot; write your own language in 10 mins&quot;</span> <span class="p">(</span><span class="nf">current-main-font</span><span class="p">)</span> <span class="mi">50</span><span class="p">)</span>
</span><span class='line'><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="http://isaachan.github.com/images/slide-textuality-tips/how_to_write_your_own_language_in_10_mins.png" alt="title_2" />
图3</p>

<h4>一页一句话</h4>

<p>我们都知道一个演讲的基本原则，就是人是主题，幻灯片是辅助物，因此，应该尽量保持幻灯片简洁，不要密密麻麻地堆彻大量文字。这个原则的一个极限状态就是幻灯片上只有一句话，表明一个主题。我们希望让所有这些幻灯片里的文字都保持同样的样式。这只需一个非常简单的函数就足够了，</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">topic</span> <span class="nv">content</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">slide</span> <span class="p">(</span><span class="nf">text</span> <span class="nv">content</span> <span class="p">(</span><span class="nf">current-main-font</span><span class="p">)</span> <span class="mi">70</span><span class="p">))</span>
</span><span class='line'><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>这个函数只接受一个字符串类型的参数，为显示在幻灯片上的文字内容。另外它将字号设置为70，使用的是系统默认的字体。</p>

<h4>修改Master版面</h4>

<p>PowerPoint和Keynote都有模版功能，可以对所有的幻灯片做统一的设置。Slideshow也有类似的机制。Slideshow在渲染每一张幻灯片之前，都会调用一个名为current-slide-assembler的函数，Slideshow运行时调用这个函数时，会传入三个参数，slide的title、title与内容的分隔符v-sep、slide的内容。下面的例子完成如下的设置，</p>

<ol>
<li>黑底白字</li>
<li>Title内容靠左，不是默认的居中</li>
</ol>


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="p">(</span><span class="nf">set-margin!</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="k">define </span><span class="nv">black-bg</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">filled-rectangle</span> <span class="nv">client-w</span> <span class="nv">client-h</span><span class="p">)</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nf">current-slide-assembler</span>
</span><span class='line'>  <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">s</span> <span class="nv">v-sep</span> <span class="nv">c</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">ct-superimpose</span>
</span><span class='line'>      <span class="nv">black-bg</span>
</span><span class='line'>      <span class="p">(</span><span class="k">if </span><span class="nv">s</span>
</span><span class='line'>        <span class="p">(</span><span class="nf">vl-append</span> <span class="nv">v-sep</span> <span class="p">(</span><span class="nf">para</span> <span class="p">(</span><span class="nf">titlet</span> <span class="nv">s</span><span class="p">))</span> <span class="p">(</span><span class="nf">colorize</span> <span class="nv">c</span> <span class="s">&quot;white&quot;</span><span class="p">))</span>
</span><span class='line'>        <span class="p">(</span><span class="nf">colorize</span> <span class="nv">c</span> <span class="s">&quot;white&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">)</span>
</span><span class='line'>    <span class="p">)</span>
</span><span class='line'>  <span class="p">)</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nf">current-title-color</span> <span class="s">&quot;white&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>current-slide-assembler函数接受一个lambda类型的参数，这个lambda接受三个参数。black-bg函数会画一个和用户可见区域一样大小的黑色矩形——这就是“黑底”了。接下来将判断当前幻灯片是否有title，如果有，则将title和内容垂直左对齐；如果没有，则直接显示内容。注意，无论是否有Title，都会将文字的颜色改为白色。最后调用(current-title-color &#8220;white&#8221;)，目的是把Title文字的颜色也改为白色。这就是“白字”了。下面的图4和图5是同样的幻灯片，在改变Master前后的效果，</p>

<p><img src="http://isaachan.github.com/images/slide-textuality-tips/change-master-1.png" alt="改变Master之前" />
图4　</p>

<p><img src="http://isaachan.github.com/images/slide-textuality-tips/change-master-2.png" alt="改变Master之后" />
图5</p>

<h4>布局</h4>

<p>有很多时候，我需要对幻灯片进行布局，比如图6示范了一些可能的形式:</p>

<p><img src="http://isaachan.github.com/images/slide-textuality-tips/left-right.png" alt="布局效果" />
图6</p>

<p>在Slideshow中实现第一种左右平分的布局非常简单，</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="p">(</span><span class="k">define </span><span class="nv">left-right-panel</span>
</span><span class='line'>  <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">left</span> <span class="nv">right</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">slide</span>
</span><span class='line'>      <span class="p">(</span><span class="nf">ht-append</span>
</span><span class='line'>        <span class="p">(</span><span class="nf">cc-superimpose</span> <span class="p">(</span><span class="nf">blank</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">client-w</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">client-h</span><span class="p">)</span> <span class="nv">left</span><span class="p">)</span>
</span><span class='line'>        <span class="p">(</span><span class="nf">cc-superimpose</span> <span class="p">(</span><span class="nf">blank</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">client-w</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">client-h</span><span class="p">)</span> <span class="nv">right</span><span class="p">)</span>
</span><span class='line'>      <span class="p">)</span>
</span><span class='line'>    <span class="p">)</span>
</span><span class='line'>  <span class="p">)</span>
</span><span class='line'><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>left-right-panel函数接受两个参数，分别是左边和右边的内容。因此，</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="p">(</span><span class="nf">left-right-panel</span> <span class="p">(</span><span class="nf">t</span> <span class="s">&quot;Hello&quot;</span><span class="p">)</span> <span class="p">(</span><span class="nf">t</span> <span class="s">&quot;World&quot;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>就能实现图6-a的效果了。其中cc-superimpose表示“Hello”和“World”两段文本在各自的区域里面都出于水平居中、垂直居中的位置（cc）。不过，这个函数限制了内容只能在各自的区域内居中，因此无法实现像图6-b那种效果，只是可以修改left-right-panel，使它能够支持不同的居中模式，</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="p">(</span><span class="k">define </span><span class="nv">left-right-panel</span>
</span><span class='line'>  <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">left</span> <span class="nv">right</span> <span class="p">[</span><span class="nv">left-superimpose</span> <span class="nv">cc-superimpose</span><span class="p">]</span> <span class="p">[</span><span class="nv">right-superimpose</span> <span class="nv">cc-superimpose</span><span class="p">])</span>
</span><span class='line'>      <span class="p">(</span><span class="nf">slide</span>
</span><span class='line'>      <span class="p">(</span><span class="nf">ht-append</span>
</span><span class='line'>        <span class="p">(</span><span class="nf">left-superimpose</span> <span class="p">(</span><span class="nf">blank</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">client-w</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">client-h</span><span class="p">)</span> <span class="nv">left</span><span class="p">)</span>
</span><span class='line'>        <span class="p">(</span><span class="nf">right-superimpose</span> <span class="p">(</span><span class="nf">blank</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">client-w</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">client-h</span><span class="p">)</span> <span class="nv">right</span><span class="p">)</span>
</span><span class='line'>      <span class="p">)</span>
</span><span class='line'>    <span class="p">)</span>
</span><span class='line'>  <span class="p">)</span>
</span><span class='line'><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>更新后的left-right-panel增加了两个参数left-superimpose和right-superimpose，并且默认值为cc-superimpose和cc-superimpose。如果要实现图6-b的效果，可以调用</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="p">(</span><span class="nf">left-right-panel</span> <span class="p">(</span><span class="nf">t</span> <span class="s">&quot;Hello&quot;</span><span class="p">)</span> <span class="p">(</span><span class="nf">t</span> <span class="s">&quot;World&quot;</span><span class="p">)</span> <span class="nv">lt-superimpose</span> <span class="nv">rt-superimpose</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>就可以了。另外，图6的其他几种布局的实现方式和left-right-panel非常类似。</p>

<h2>3.总结</h2>

<p>上面四个例子只是很少的一部分。Slideshow的魅力在于让你可以把关于制作幻灯片的经验、模式，通过代码固化下来，并且降低重用和分享的难度。同时，Slideshow可以帮你把内容和样式进行干净的分离，随着使用经验的增加，你会积累更多的样式函数，那时就可以把精力放在幻灯片的内容上，从而提高生产率。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[文本化的幻灯片 - Slideshow]]></title>
    <link href="http://isaachan.github.com/blog/2013/08/17/slide-textuality/"/>
    <updated>2013-08-17T22:12:00+08:00</updated>
    <id>http://isaachan.github.com/blog/2013/08/17/slide-textuality</id>
    <content type="html"><![CDATA[<p>作为一名体面的程序员，作为一名被Unix文化侵染的程序员，作为一名希望世界是由简单的纯文本构成的程序员，生活中充满太多无奈。二进制的格式无处不在，后缀名将文件分出了三六九等。这其中，有两种文件我最无奈，图像和幻灯片，它们总和我的工作生活密切相关。</p>

<p>不过，现在光来了！HuKai在一篇<a href="http://www.iamhukai.com/?p=149">blog</a>里介绍了一个很酷的工具——Dot，它提供了一种可以基于文本描述图形的简洁的DSL。利用这个DSL，可以绘制出相当复杂的图案。激动之余，我开始寻找文本化幻灯片的方法。于是，我发现了DrRacket（它的前身就是大名鼎鼎的DrScheme）。DrRacket是MIT开发的Scheme的运行时，其中包含一个制作幻灯片的组件，名曰Slideshow。</p>

<p>很明显，Slideshow要求使用者用scheme来编写幻灯片，这就满足了像我这样的语言控的怪癖。我也因此放弃了一些其他类似的工具，比如SliTex。在Slideshow中，最核心的概念是pict和slide。slide自然表示一张幻灯片，它是由一个或多个pict按照不同的顺序排列组成的。slideshow的源代码以rkt为后缀名。下面是Slideshow的Hello World（hello.rkt）：</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="o">#</span><span class="nv">lang</span> <span class="nv">slideshow</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nf">slide</span> <span class="p">(</span><span class="nf">t</span> <span class="err">“</span><span class="nv">Hello</span> <span class="nv">World</span><span class="err">”</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>




<!-- more -->


<p>第一行代码注册了语言的类型，即slideshow，第二行代码包含一个slide函数的调用，它会产生一张幻灯片，幻灯片的内容是(t “Hello World”)函数的结果——包含字符串“Hello World”的pict。t是Slideshow中众多返回pict的函数之一。在默认情况下，slide函数会把pict置于幻灯片的中间，不过它有一个可选的选项layout来控制pict的位置，让我们在刚才的基础上再增加一张幻灯片：</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="err">…</span>
</span><span class='line'><span class="p">(</span><span class="nf">slide</span>
</span><span class='line'>   <span class="o">#</span><span class="nv">:layout</span> <span class="ss">&#39;top</span>
</span><span class='line'>   <span class="p">(</span><span class="nf">t</span> <span class="err">“</span><span class="nv">Hello</span> <span class="nv">World</span><span class="err">”</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>layout的值包括&#8217;center，&#8217;top，&#8217;tall和&#8217;auto，&#8217;auto是默认值。slide还有其他选项，title、name、inset和timeout等，可以为slide提供更多可配置的功能。</p>

<p>如果你对t函数使用的字体和大小不满意的话，可以使用text函数来自定义它们。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="err">…</span>
</span><span class='line'><span class="p">(</span><span class="nf">slide</span>
</span><span class='line'>   <span class="o">#</span><span class="nv">:title</span> <span class="err">“</span><span class="nv">Code</span> <span class="nv">Snap</span><span class="err">”</span>
</span><span class='line'>   <span class="p">(</span><span class="nf">text</span> <span class="err">“</span><span class="nv">String</span> <span class="nv">name</span> <span class="nv">=</span> <span class="nv">getNameFromDB</span><span class="p">()</span><span class="c1">;” &#39;(bold . morden), (+ (current-font-size 10))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>我为这张幻灯片增加了title “Code Snap”，它会出现在幻灯片的顶端。然后使用text函数生成一段Java代码片段，为了让它看上去更像“代码”，使用等宽字体morden并加粗，大小也比默认字号大了10。这时在命令行里键入下面的命令</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&gt; slideshow hello.rkt
</span></code></pre></td></tr></table></div></figure>


<p>就能看到前面制作的三张幻灯片依次播放了。如果你现在对Slideshow产生了一点兴趣，那么别犹豫了，在命令行里输入</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&gt; slideshow
</span></code></pre></td></tr></table></div></figure>


<p>就立刻能够看到一个介绍Slideshow入门教程幻灯片，它非常给力，而且它就是用Slideshow制作的，你可以在drrakect的安装目录下找到它的源代码。</p>

<p>希望你能花点儿时间学习一下Slideshow，然后从此爱上幻灯片，爱上Scheme！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Chocolatey, 我爱你]]></title>
    <link href="http://isaachan.github.com/blog/2013/02/07/chocolatey-i-love-you/"/>
    <updated>2013-02-07T14:28:00+08:00</updated>
    <id>http://isaachan.github.com/blog/2013/02/07/chocolatey-i-love-you</id>
    <content type="html"><![CDATA[<p>巧克力在很多文化里都代表了美好的事物。如果你是Windows的使用者，可能Windows复杂、丑陋的包管理正在把你折腾的很惨。*NIX平台上的各种优雅的包管理工具这时让人非常眼馋。直到有一天Chocolatey出现了，让我看到了Windows平台上的包管理朝着正确的方向前进了。看来，和巧克力沾边的东西都能让人产生幸福的感觉。</p>

<h2>1. 安装</h2>

<p>Chocolatey的安装过程简单至极，在<a href="http://chocolatey.org/">Chocolatey.org</a>上最醒目的地方有一行命令，把它复制到命令行中运行，只要一分钟左右，安装就完成了。在命令下键入</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='powershell'><span class='line'><span class="n">chocolatey</span> <span class="n">help</span>
</span></code></pre></td></tr></table></div></figure>


<p>可以验证安装是否成功。</p>

<!-- more -->


<h2>2. 初体验</h2>

<p>默认情况下，Chocolatey会把自己安装到C:\Chocolatey目录下。该目录下还有三个子目录，它们的作用分别是</p>

<ul>
<li>bin - Chocolatey自身的命令，以及通过Chocolatey安装的某些软件会在bin下增加一个*.bat的快捷方法。</li>
<li>chocolateyInstall - Chocolatey运行时的程序以及各种log。</li>
<li>lib - 安装过程中下载的包。</li>
</ul>


<p>是时候尝试一下Chocolatey的威力了，在命令行上键入</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='powershell'><span class='line'><span class="n">chocolatey</span> <span class="n">install</span> <span class="n">7zip</span>
</span></code></pre></td></tr></table></div></figure>


<p>此时会出现下载的进度信息。耐心等一会儿，Chocolatey会告诉你安装完成。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>“Finished installing '7zip' and dependencies - if errors not shown in console, none detected. Check log for errors if unsure”</span></code></pre></td></tr></table></div></figure>


<p>这之后检查你的Program Files(或者Program Files (x86))下应该包含7-Zip目录了。</p>

<h2>3. 安装自己的包</h2>

<p>在我写这篇博客的时候，我的机器上并没有中文输入法。在Chocolatey上寻找未果后（<a href="http://chocolatey.org/packages?q=google+pinyin">http://chocolatey.org/packages?q=google+pinyin</a>）（在你读到这篇Blog的时候，我已经上传了Google Pinyin的安装包），我只能自己为Google Pinyin创建一个Chocolatey的安装包。研究过C:\Chocolatey\lib\下面的7Zip的包文件后，我们可以获知创建Chocolatey包的方法。</p>

<p>Chocoletay包一个满足特定目录结构的NuGet包。<a href="http://nuget.org/">NuGet</a>是另一个Windows上令人心动的工具，它是一种特定的包格式，类似于.deb .rpm，同时它也具有版本化的包管理功能。与Chocolatey的不同在于，NuGet关注在开发人员使用的包，而Chocoletay更关注最终用户可用的软件包。既然Chocolatey包就是NuGet包，可以用命令</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='powershell'><span class='line'><span class="n">NuGet</span><span class="p">.</span><span class="n">exe</span> <span class="n">pack</span> <span class="p">****.</span><span class="n">nuspec</span>
</span></code></pre></td></tr></table></div></figure>


<p>创建。如果你没有安装NuGet没有关系，Chocolatey包含了一个NuGet的二进制执行文件，可以使用命令</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='powershell'><span class='line'><span class="n">cpack</span><span class="p">.</span><span class="n">bat</span> <span class="n">pack</span> <span class="p">****.</span><span class="n">nuspec</span>
</span></code></pre></td></tr></table></div></figure>


<p>创建。cpack.bat可在C:\Chocolatey\bin目录下找到。</p>

<p>不过Chocolatey的包还需要一些特殊的内容，才能被Chocolatey识别并安装。查看7Zip的安装文件后，可以看到我们需要在包的顶级目录下创建一个tools目录，并在下面包含一个chocolateyInstall.ps1文件，该文件是安装包的（PowerShell）代码。 综上所述，我们需要很少的步骤，就能创建Google Pinyin的包：</p>

<p>&#8212; C:/GooglePinyinPackage/google-pinyin.nuspec &#8212;</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;package&gt;</span>
</span><span class='line'>    <span class="nt">&lt;metadata&gt;</span>
</span><span class='line'>        <span class="nt">&lt;id&gt;</span>google-pinyin<span class="nt">&lt;/id&gt;</span>
</span><span class='line'>        <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>        <span class="nt">&lt;title&gt;</span>Google Pinyin<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>        <span class="nt">&lt;authors&gt;</span>Han Kai<span class="nt">&lt;/authors&gt;</span>
</span><span class='line'>        <span class="nt">&lt;owners&gt;</span>Han Kai<span class="nt">&lt;/owners&gt;</span>
</span><span class='line'>        <span class="nt">&lt;requireLicenseAcceptance&gt;</span>false<span class="nt">&lt;/requireLicenseAcceptance&gt;</span>
</span><span class='line'>        <span class="nt">&lt;description&gt;</span>Google pinyin installation for Chinese requirement.<span class="nt">&lt;/description&gt;</span>
</span><span class='line'>        <span class="nt">&lt;copyright&gt;</span>Copyright 2012<span class="nt">&lt;/copyright&gt;</span>
</span><span class='line'>        <span class="nt">&lt;tags&gt;</span>google pinyin<span class="nt">&lt;/tags&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/metadata&gt;</span>
</span><span class='line'>    <span class="nt">&lt;files&gt;</span>
</span><span class='line'>        <span class="nt">&lt;file</span> <span class="na">src=</span><span class="s">&quot;chocolateyInstall.ps1&quot;</span> <span class="na">target=</span><span class="s">&quot;tools/chocolateyInstall.ps1&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/files&gt;</span>
</span><span class='line'><span class="nt">&lt;/package&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>以及
&#8212; C:/GooglePinyinPackage/chocolateyInstall.ps1 &#8212;</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='powershell'><span class='line'><span class="k">try</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">Install-ChocolateyPackage</span> <span class="s1">&#39;google-pinyin&#39;</span> <span class="s1">&#39;exe&#39;</span> <span class="s1">&#39;/s&#39;</span> <span class="s1">&#39;http://dl.google.com/pinyin/v2/GooglePinyinInstaller.exe&#39;</span>
</span><span class='line'><span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
</span><span class='line'>    <span class="nb">Write-ChocolateyFailure</span> <span class="s1">&#39;Google Pinyin&#39;</span> <span class="s2">&quot;</span><span class="si">$(</span><span class="err">$</span><span class="si">_.Exception.Message)</span><span class="s2">&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>此处使用了Chocolatey提供的Install-ChocolateyPackage函数，它需要四个参数，id（google-pinyin，这个要和google-pinyin.nuspec中的一致），安装文件类型，安装参数（/s是silent installation）和安装文件的下载路径。</p>

<p>这时在C:\google-pinyin目录下运行下面的命令，可以生成google-pinyin.nupack包：</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='powershell'><span class='line'><span class="n">cpack</span> <span class="n">google-pinyin</span><span class="p">.</span><span class="n">nuspec</span>
</span></code></pre></td></tr></table></div></figure>


<p>运行下面的命令可以安装这个包，</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='powershell'><span class='line'><span class="n">cinst</span> <span class="n">googe-pinyin</span> <span class="n">-source</span> <span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="n">GooglePinyinPackage</span>
</span></code></pre></td></tr></table></div></figure>


<p>其中，cinst是chocolatey install的快捷方式。<strong>-source C:\GooglePinyinPackage</strong>非常重要，它将本地C:\GooglePinyinPackage目录设置为cinst的安装软件包源。如果没有这个参数，cinst会在默认的两个源中查找，而后抱怨找不到google-pinyin。cinst的两个默认源是<a href="http://chocolatey.org/api/v2/">这里</a>和<a href="http://chocolatey.org/api/v2/">这里</a>。</p>

<p>现在，安装应该结束了，可以看一看你的输入法列表中是否包含了Google拼音输入法。</p>

<h2>4. 分享你的安装包</h2>

<p>到目前为止，我们安装了两个包，7Zip和Google拼音输入法，一个来自于Chocolatey.org，一个是我自己创建的。Chocolatey.org实际上是个社区，鼓励大家分享不同人创建的安装包。这正是我钟爱Chocolatey的原因！那么，接下来我要把刚刚创建的安装包发布到Chocolatey社区中。</p>

<p>发布安装包需要注册Chocolatey账户。注册完成后，可以在<a href="http://chocolatey.org/packages/upload">这里</a>上传安装包。</p>

<p><img src="http://isaachan.github.com/images/upload-chocolatey-package.png" alt="上传Chocolatey安装包" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[关于理想]]></title>
    <link href="http://isaachan.github.com/blog/2013/01/31/about-ideal/"/>
    <updated>2013-01-31T22:22:00+08:00</updated>
    <id>http://isaachan.github.com/blog/2013/01/31/about-ideal</id>
    <content type="html"><![CDATA[<p>理想这个东西，刚刚带上总会让人受伤。</p>

<p>但是时间长了以后，它却像鸦片一样，成为你生命里离不开的东西。你每天就为了它而奔波。</p>

<p>你懂的。</p>
]]></content>
  </entry>
  
</feed>
